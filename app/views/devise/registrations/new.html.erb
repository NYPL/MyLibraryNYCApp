<html lang="en">

<noscript>
   <h3 id='no-js-message'>This form requires JavaScript. Your browser may not have JavaScript or it may be disabled. Please try again with a JavaScript-enabled browser or email help@mylibrarynyc.org for assistance.
   </h3>
</noscript>

<h1>Sign Up</h1>

<%= javascript_include_tag('sign_up_async_request.js') %>

<%= form_for(resource, :as => resource_name, :url => registration_path(resource_name),  validate: true) do |f| %>

  <%= devise_error_messages! %>
  <div class="field-group">
    <%= label_tag :email, "Your DOE email address", :id => 'userEmail-label' %>
    <%= f.email_field :email, :autofocus => true, "aria-labelledby" => 'userEmail-label user_email_error'  %>
    <div id='check_email_div'>
      <span class ='spinner'></span>
      <span id='check_email_span'>
        Validate e-mail.
      </span>
    </div>
    <span>
      Email address must end with @schools.nyc.gov
    </span>
  </div>
  <div class="field-group">
    <%= label_tag :user_alt_email, "Alternate email address (optional)", :id => 'userAltEmail-label' %>
    <%= f.email_field :alt_email, "aria-labelledby" => 'userAltEmail-label user_alt_email_error', 'validation-passed' => 'true' %> 
  </div>
  <div class="field-group">
    <%= label_tag :user_first_name, "First name", :id => 'userFirstName-label' %>
    <%= f.text_field :first_name, "aria-labelledby" => 'userFirstName-label user_first_name_error' %>
  </div>
  <div class="field-group">
    <%= label_tag :user_last_name, "Last name", :id => 'userLastName-label' %>
    <%= f.text_field :last_name, "aria-labelledby" => 'userLastName-label user_last_name_error' %>
  </div>

  <div class="field-group">
    <%= label_tag :user_school_id, 'Your school', :id => 'userSchool-label' %>
    <%= f.select :school_id, School.active.map { |s| [s.name + " (#{s.code[1..-1].upcase})", s.id] }, "aria-labelledby" => 'userSchool-label user_school_error', :include_blank => '-- Select A School -- ' %>
  </div>

  <div class="field-group">
    <%= label_tag :user_pin, "PIN", :id => 'userPin-label' %>
    <%= f.text_field :pin, "aria-labelledby" => 'userPin-label user_pin_error' %>
    <span>
    Your PIN serves as the password for your account. Make sure it is a number you will remember.    
    </span>
    <br>
    <span>
      Your PIN must be 4 digits. It cannot contain a digit that is repeated 3 or more times (0001, 5555) and cannot be a pair of repeated digits (1212, 6363).
    </span>
  </div>

  <div class="actions">
    <%= f.submit "Sign Up", :class=> "button", :id =>'sign_up_button',   disabled: true %>
  </div>
<% end %>

</html>
