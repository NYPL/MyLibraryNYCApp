<script>
  function PeriodicalQuery() {
    var request = new XMLHttpRequest();
    request.onload = function (event) {
      if (request.response['timeout_status'] == 'no_current_user') {
        return;
      } else if (request.response['timeout_status'] == 'timeout_warning') {
        $('#timeout-warning').slideDown('fast');
      } else if (request.response['timeout_status'] == 'timed_out') {
        window.location.href = '/users/start';
      }
    };
    request.open('GET', '/timeout_check', true);
    request.responseType = 'json';
    request.send();
    setTimeout(PeriodicalQuery, (5 * 1000 * 60));
  }
  setTimeout(PeriodicalQuery, (5 * 1000 * 60));
</script>
